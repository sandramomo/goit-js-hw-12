{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import Axios from 'axios';\nconst axios = Axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  headers: {},\n  params: {\n    key: '51716967-7d1f105da1ec22b798b2084bf',\n    q: '',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  },\n});\n\nexport async function getImagesByQuery(query, page) {\n  const result = await axios.get('', {\n    params: {\n      per_page: 15,\n      q: query,\n      page: page,\n    },\n  });\n  return result.data;\n}\n","import SimpleLightbox from 'simplelightbox';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n});\nexport function createGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images.map(image => createImage(image)).join('');\n  gallery.innerHTML = markup;\n  lightbox.refresh();\n}\nexport function loadMoreGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images.map(image => createImage(image)).join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}\nexport function showLoader() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'block';\n}\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'none';\n}\nfunction createImage(image) {\n  return `<li><div class=\"image-box\">\n  <a href=\"${image.largeImageURL}\"><img src=\"${image.webformatURL}\" alt=\"${image.tags}\"></a>\n  <div class=\"image-description\">\n    <p class=\"image-stats\">Downloads: ${image.downloads}</p>\n    <p class=\"image-stats\">Likes: ${image.likes}</p>\n    <p class=\"image-stats\">Views: ${image.views}</p>\n    <p class=\"image-stats\">Comments: ${image.comments}</p>\n  </div>\n</div></li>`;\n}\n\nexport function showLoadMoreBtn() {\n  const loadbtn = document.querySelector('.loadmore-js');\n  loadbtn.classList.add('loadmore');\n}\nexport function hideLoadMoreBtn() {\n  const loadbtn = document.querySelector('.loadmore-js');\n  loadbtn.classList.remove('loadmore');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreBtn,\n  hideLoadMoreBtn,\n  loadMoreGallery,\n} from './js/render-functions';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loadmore: document.querySelector('.loadmore-js'),\n};\n\nlet page = 1;\nlet userValue;\nlet maxPages;\n\nrefs.form.addEventListener('submit', handleFormSubmit);\nrefs.loadmore.addEventListener('click', handleLoadMoreClick);\n\nasync function handleFormSubmit(e) {\n  e.preventDefault();\n  userValue = refs.form.elements.searchtext.value;\n  page = 1;\n  if (userValue.trim() === '') {\n    iziToast.show({\n      title: 'Oi!',\n      message: 'Please enter a valid search option.',\n      backgroundColor: '#fff0f6',\n      titleColor: '#ff4d79',\n      messageColor: '#ff80a0',\n      progressBarColor: '#ffb3c6',\n    });\n    e.target.reset();\n    return;\n  }\n  clearGallery();\n  hideLoadMoreBtn();\n  showLoader();\n  try {\n    const result = await getImagesByQuery(userValue, page);\n    maxPages = Math.ceil(result.totalHits / 15);\n    if (result.hits.length === 0) {\n      iziToast.show({\n        title: 'Oops!',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        backgroundColor: '#fff0f6',\n        titleColor: '#ff4d79',\n        messageColor: '#ff80a0',\n        progressBarColor: '#ffb3c6',\n      });\n      hideLoader();\n      e.target.reset();\n      return;\n    } else {\n      createGallery(result.hits);\n      hideLoader();\n      checkPages();\n    }\n  } catch {\n    err => {\n      hideLoader();\n      console.log(err);\n      e.target.reset();\n    };\n  }\n}\nasync function handleLoadMoreClick(e) {\n  e.preventDefault();\n  const result = await getImagesByQuery(userValue, page);\n  try {\n    checkPages();\n    loadMoreGallery(result.hits);\n    hideLoader();\n  } catch {\n    err => {\n      hideLoader();\n      console.log(err);\n      e.target.reset();\n    };\n  }\n}\n\nfunction checkPages() {\n  if (maxPages > page) {\n    page += 1;\n    showLoadMoreBtn();\n  } else {\n    hideLoadMoreBtn();\n    iziToast.show({\n      message: 'We are sorry, but you have reached the end of search results.',\n      backgroundColor: '#fff0f6',\n      titleColor: '#ff4d79',\n      messageColor: '#ff80a0',\n      progressBarColor: '#ffb3c6',\n    });\n  }\n}\n"],"names":["axios","Axios","getImagesByQuery","query","page","lightbox","SimpleLightbox","createGallery","images","gallery","markup","image","createImage","loadMoreGallery","clearGallery","showLoader","loader","hideLoader","showLoadMoreBtn","hideLoadMoreBtn","refs","userValue","maxPages","handleFormSubmit","handleLoadMoreClick","iziToast","result","checkPages"],"mappings":"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"}